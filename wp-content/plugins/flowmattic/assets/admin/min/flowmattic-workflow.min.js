!function(a){"use strict";a(document).ready(function(){var b,c=a(".flowmattic-sidebar-nav a"),d=a(".flowmattic-close-sidebar"),e=a("#flowmattic-new-step-template"),f=a(".workflow-name"),g=a(".sidebar-workflow-name"),h=a(".workflow-name-label"),i=a("#sidebar-workflow-folder"),j=a(".flowmattic-toggle-steps");a("body").on("click",".fm-add-step",function(){a("body").find(".step-new").next(".fm-workflow-add-step").remove(),a("body").find(".step-new").remove(),a(e.html()).insertAfter(a(this).parents(".fm-workflow-add-step")),a("body").find(".step-new").next(".fm-workflow-step")&&a("body").find(".step-new").next(".fm-workflow-add-step").remove()}),h.on("click",function(){a(this).addClass("hidden"),f.removeClass("hidden").focus()}),f.on("keyup",function(){clearTimeout(b),h.text(f.val()),g.val(f.val()),b=setTimeout(function(){h.removeClass("hidden"),f.addClass("hidden")},2e3)}),f.on("keydown",function(){clearTimeout(b)}),g.on("keyup",function(){h.text(g.val()),f.val(g.val())}),c.on("click",function(b){var c=a(this).attr("href"),d="";if(-1===c.indexOf("#"))return c;b.preventDefault(),"#flowmattic-sidebar-outline"===c&&(a(".fm-workflow-outline").html(""),a.each(a("body").find(".fm-workflow-step-header"),function(){var b=a(this).find(".fm-workflow-icon").html(),c=a(this).find(".fm-application-action").html(),e=a(this).closest(".fm-workflow-step").attr("step-id");""===c&&(c=a(this).find(".fm-application-title").html()),d='<li data-step-id="'+e+'">'+b+c+"</li>",a(".fm-workflow-outline").append(d)}),a("body").find(".fm-workflow-outline li").on("click",function(){var b=a(this).attr("data-step-id");a("body").find('.fm-workflow-step[step-id="'+b+'"]').hasClass("collapsed")&&a("body").find('.fm-workflow-step[step-id="'+b+'"]').find(".fm-workflow-step-header").trigger("click"),a("html, body").animate({scrollTop:a("body").find('.fm-workflow-step[step-id="'+b+'"]').offset().top-120},500)})),a(this).parent().siblings().find("a").removeClass("fm-active"),a(this).addClass("fm-active"),a(".flowmattic-sidebar-wrapper").addClass("fm-active-sidebar"),a(c).parent(".flowmattic-sidebar-content").addClass("fm-active"),a(c).siblings().removeClass("fm-active"),a(c).addClass("fm-active")}),d.on("click",function(b){b.preventDefault(),a(".fm-active").removeClass("fm-active"),a(".flowmattic-sidebar-wrapper").removeClass("fm-active-sidebar")}),j.on("click",function(){var b=this;a(this).toggleClass("collapsed"),a("body").find(".fm-workflow-step").each(function(c,d){a(b).hasClass("collapsed")?(a(d).addClass("collapsed"),a(d).find(".fm-workflow-step-body").slideUp()):(a(d).removeClass("collapsed"),a(d).find(".fm-workflow-step-body").slideDown())})}),i.on("click",function(){a(this).next("ul").show()}),a("body").on("click","#do-test-run",function(){var b={},c={},d=a("body").find(".workflow-input.workflow-id").val(),e=window.Swal.mixin({customClass:{confirmButton:"btn btn-primary shadow-none me-xxl-3",cancelButton:"btn btn-danger shadow-none"},buttonsStyling:!1});a("#testRunModal").find("textarea").each(function(){var c=a(this).attr("name"),d=a(this).val();b[c]=d}),c={action:"flowmattic_execute_workflow",workflow_id:d,workflow_nonce:FMConfig.workflow_nonce,captured_data:b},a("#testRunModal").modal("hide"),e.fire({title:"Running Workflow Test...",text:"Please wait while the workflow test run is completed",showConfirmButton:!1,didOpen:function(){e.showLoading()}}),a.ajax({url:ajaxurl,data:c,type:"POST",success:function(){e.fire({title:"Success!",text:"Workflow is successfully executed. Please check task history for more details.",icon:"success",showConfirmButton:!0,timer:2e3})}})}),a("body").find('[data-toggle="tooltip"], .webhook-url-wrapper input').tooltip({template:'<div class="tooltip" role="tooltip"><div class="tooltip-inner"></div></div>'})}),a(window).on("load",function(){a(".flowmattic-sidebar-content").show()})}(jQuery);