jQuery(document).ready((function(t){var e={membershipCountsGraph:!1,filterButton:!1,init:function(){this.filterButton=t("#rcp-graphs-filter .button-secondary"),this.getMembershipCountsData(),t("#rcp-graphs-filter").on("submit",(function(t){t.preventDefault(),e.getMembershipCountsData()}))},parseFilters:function(e){let r=t("#rcp-graphs-date-options"),a=t("#rcp-graphs-subscriptions"),s=t("#rcp-graphs-membership-status");return r.length&&(e.range=r.val(),"other"===e.range&&(e.m_start=t("#rcp-graphs-month-start").val(),e.year=t("#rcp-graphs-year-start").val(),e.m_end=t("#rcp-graphs-month-end").val(),e.year_end=t("#rcp-graphs-year-end").val())),a.length&&(e.level_id=a.val()),s.length&&(e.membership_status=s.val()),e},getMembershipCountsData:function(){e.filterButton.data("text",e.filterButton.attr("value")).attr("value","Please wait..."),e.filterButton.prop("disabled",!0);let r={action:"rcp_get_membership_counts_report_data",nonce:t("#rcp-reports-wrap").data("nonce")};r=e.parseFilters(r),console.log("Ajax args",r),t.ajax({type:"POST",data:r,dataType:"json",url:ajaxurl,success:function(t){return console.log("Report data",t),e.filterButton.attr("value",e.filterButton.data("text")).prop("disabled",!1),!!t.success&&(!1!==e.membershipCountsGraph&&e.membershipCountsGraph.destroy(),e.membershipCountsGraph=new Chart(document.getElementById("rcp-membership-counts-graph-canvas").getContext("2d"),t.data),t.data)}})}};e.init()}));